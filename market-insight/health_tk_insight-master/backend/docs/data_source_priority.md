# 数据源权威度优化总结

## ✅ 已完成的改进

### 1. 数据源优先级设定

在 `content_generator.py` 中明确了数据源权威度：

```
数据源优先级（从高到低）：
1. 小红书/抖音官方API数据（用户真实互动、内容表现）- 最权威
2. 其他社交媒体平台官方数据
3. 联网搜索数据（新闻报道、行业报告）- 参考价值，需交叉验证
4. 推断性数据 - 需明确标注为"推断"
```

### 2. 数据格式化优化

`_format_data_for_prompt()` 函数现在：
- 支持三种数据源：Tavily搜索、小红书API、抖音API
- 按权威度分组展示数据
- 明确标注数据来源和权威等级
- 为每个数据源添加上下文说明

示例输出格式：
```
### 【最高权威】小红书官方API数据
1. 【标题】
   内容：...
   互动：1234赞 89评论
   来源：小红书API

### 【高权威】抖音官方API数据
1. 【标题】
   互动：50000播放 3200赞 156分享
   来源：抖音API

### 【参考背景】联网搜索数据
1. 【标题】
   内容：...
   来源：某新闻站（搜索数据，需交叉验证）
```

### 3. LLM 提示词更新

所有提示词模板现在包含：
1. 数据源优先级说明
2. 明确指示优先引用小红书/抖音数据
3. 联网搜索数据作为补充背景
4. 数据使用规则（8条详细规则）

## 📊 数据流程

```
采集数据
    ├─ 小红书API → 用户行为、内容互动（最高权威）
    ├─ 抖音API → 视频表现、用户反馈（次高权威）
    └─ Tavily搜索 → 新闻、报告、背景信息（参考级别）
                    ↓
            数据格式化（按权威度分组）
                    ↓
            传入LLM提示词
                    ↓
        LLM生成报告（优先引用高权威数据）
```

## 🔄 下一步（待小红书/抖音API接入后）

1. 启用小红书数据采集：
   ```python
   DataCollectorNode(
       xiaohongshu_enabled=True,  # 设为True
       xiaohongshu_client=xiaohongshu_client
   )
   ```

2. 启用抖音数据采集：
   ```python
   DataCollectorNode(
       douyin_enabled=True,  # 设为True
       douyin_client=douyin_client
   )
   ```

3. 报告将自动优先使用官方API数据，提升可信度

## 📝 注意事项

- 当前小红书/抖音数据采集被禁用（`enabled=False`）
- 系统仍能正常工作，使用Tavily搜索数据
- 一旦启用社媒API，报告质量将显著提升
- LLM已经知道数据权威度，会优先引用高权威数据源
